@font-face {
    font-family: "geist";
    src: url(assets/fonts/Geist.ttf) format("truetype");
}

@font-face {
    font-family: "geist-mono";
    src: url(assets/fonts/GeistMono.ttf) format("truetype");
}

@font-face {
    font-family: "bitter";
    src: url(assets/fonts/Bitter.ttf) format("truetype");
}

:root {
    --dark_h: #1d2021;
    --dark: #282828;
    --dark_s: #32302f;

    --dark1: #3c3836;
    --dark2: #504945;
    --dark3: #665c54;
    --dark4: #7c6f64;

    --light_h: #f9f5d7;
    --light: #fbf1c7;
    --light_s: #f2e5bc;

    --light1: #ebdbb2;
    --light2: #d5c4a1;
    --light3: #bdae93;
    --light4: #a89984;

    --gray: #928374;
    --gray-dim: #a89984;

    --red: #fb4934;
    --orange: #fe8019;
    --yellow: #fabd2f;
    --green: #b8bb26;
    --aqua: #8ec07c;
    --blue: #83a598;
    --purple: #d3869b;

    --red-dim: #cc2412;
    --orange-dim: #d65d0e;
    --yellow-dim: #d79921;
    --green-dim: #98971a;
    --aqua-dim: #689d6a;
    --blue-dim: #458588;
    --purple-dim: #b16286;

    --size_border: 2px;
    --size_border_wide: 4px;
    --size_border_radius: 6px;
    --size_border_radius_large: 12px;
    --size_toolbar_width: 36px;
    --size_toolbar_width_half: 18px;
    --size_margin: 2px;
    --size_padding: 3px;
    --size_padding_large: 24px;
    --size_icon: large;

    --transition_duration: 150ms;

    --transition_background_color: background-color ease-in
        var(--transition_duration);
    --transition_border_color: border-color ease-in var(--transition_duration);

    --style_border: solid;

    --shadow: rgba(0, 0, 0, 0.12) 0px 1px 3px, rgba(0, 0, 0, 0.24) 0px 1px 2px;
    --shadow_strong:
        rgba(0, 0, 0, 0.2) 0px 1px 2px, rgba(0, 0, 0, 0.1) 0px 1px 3px;
    --shadow_inset:
        inset rgba(0, 0, 0, 0.3) 0px 1px 2px,
        inset rgba(0, 0, 0, 0.2) 0px 1px 3px;

    --sans: geist, sans;
    --mono: geist-mono, mono;
    --serif: bitter, serif;

    font-family: var(--sans);
}

.dark_theme {
    --color_border: var(--dark1);
    --color_border_light: var(--dark4);
    --color_background: var(--dark);
    --color_background_soft: var(--dark_s);
    --color_background_hard: var(--dark_h);
    --color_foreground: var(--light);
    --color_foreground_soft: var(--light_s);
    --color_foreground_hard: var(--light_h);

    background-color: var(--dark_h);
}

.light_theme {
    --color_border: var(--light1);
    --color_border_light: var(--light4);
    --color_background: var(--light);
    --color_background_soft: var(--light_s);
    --color_background_hard: var(--light_h);
    --color_foreground: var(--dark);
    --color_foreground_soft: var(--dark_s);
    --color_foreground_hard: var(--dark_h);

    background-color: var(--dark_h);
}

#APP_CONTAINER {
    padding: var(--size_margin);
    box-sizing: border-box;
    display: grid;
    grid-gap: var(--size_margin);
    grid-template-rows: var(--size_toolbar_width) repeat(5, 1fr) var(
            --size_toolbar_width
        );
    grid-template-columns:
        var(--size_toolbar_width) 14vw repeat(5, 1fr)
        14vw;
    height: 100vh;

    #LEFTMOST_SIDEBAR {
        grid-area: 2 / 1 / 8 / 1;
        background-color: var(--color_background_soft);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        box-shadow: var(--shadow);
        overflow: hidden;

        #LM_S_ACTIONS {
            display: flex;
            flex-direction: column;
        }
        #LM_S_BOTTOM {
            display: flex;
            flex-direction: column;
            overflow: hidden;
            #LM_S_DIRECTORIES {
                overflow: scroll;
            }
        }
    }

    #LEFT_INPUT {
        grid-area: 1 / 1 / 2 / 3;
        background-color: var(--color_background_soft);
        border-color: transparent;
        font-family: var(--sans);
        color: var(--color_foreground);
        box-shadow: var(--shadow);

        &:hover {
            border-color: var(--color_border_light);
        }
        &:focus {
            outline: none;
            border-color: var(--color_foreground_soft);
        }
    }
    #LEFT_SIDEBAR {
        grid-area: 2 / 2 / 8 / 3;
        background-color: var(--color_background);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        box-shadow: var(--shadow);
        overflow: hidden;

        #L_S_TOP {
            display: flex;
            flex-direction: column;

            #L_S_OPENFILES {
                overflow-y: scroll;
            }
        }

        #L_S_BOTTOM {
            display: flex;
            flex-direction: column;
            overflow: hidden;

            #L_S_B_ALLFILES {
                overflow-y: scroll;
            }
        }
    }
    #APP_MODE_WINDOW {
        grid-area: 1 / 3 / 8 / 9;
        display: flex;
        flex-direction: column;
        background-color: var(--color_background);

        #SETTINGS_HEADER {
            background-color: var(--color_background_soft);
            height: var(--size_toolbar_width);
            box-shadow: var(--shadow);
            margin-bottom: var(--size_margin);
        }

        .settings_category {
            border-bottom-left-radius: var(--size_border_radius);
            background-color: var(--color_background_soft);
            display: flex;
            flex-direction: row;
            align-items: center;
            border-bottom: var(--size_border) var(--color_border)
                var(--style_border);
            border-left: var(--size_border) var(--color_border)
                var(--style_border);
            box-sizing: border-box;
            height: var(--size_toolbar_width);
        }

        .category_title {
            color: var(--color_foreground);
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            flex-grow: 1;

            .left {
                display: flex;
                flex-direction: row;
            }

            .category_title_name {
                margin-left: var(--size_margin);
            }
        }

        .log {
            background-color: var(--color_background);
        }
    }
    #ENCOUNTER {
        grid-area: 1 / 3 / 8 / 9;
        background-color: var(--color_background);
        #TALENT_SKILL_BAR {
            display: flex;
            flex-direction: row;
            #TALENT_COLUMN {
                display: flex;
                flex-direction: column;
            }
            #SKILL_ROW {
                display: flex;
                flex-direction: row;
            }
        }
    }

    #MARKDOWN_READER {
        grid-area: 1 / 3 / 8 / 8;
        color: var(--color_foreground);
        background-color: var(--color_background_soft);
        padding: var(--size_padding);
        overflow-y: scroll;
        font-family: var(--serif);

        :first-child {
            margin-top: 0;
        }

        code {
            font-family: var(--mono);
            background-color: var(--color_background_hard);
            border-radius: var(--size_border_radius);
            border-top-left-radius: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--size_margin);
        }

        th,
        td {
            padding: var(--size_padding);
            text-align: left;
            border: var(--size_border) solid var(--color_border_light);
        }

        tr:nth-child(even) {
            background-color: var(--color_background_soft);
        }

        th {
            background-color: var(--color_border);
            color: var(--color_foreground_hard);
            font-family: var(--sans);
        }
    }

    #AIWRITER_HISTORY {
        grid-area: 1 / 3 / 7 / 8;
        resize: none;
        background-color: var(--color_background_hard);
        border: var(--size_border) var(--style_border) transparent;
        color: var(--color_foreground_hard);
        font-family: var(--sans);
        padding: var(--size_padding);
        margin: 0;
        box-shadow: var(--shadow);
        &:hover {
            border-color: var(--color_border_light);
        }
        &:focus {
            outline: none;
            border-color: var(--color_foreground_soft);
        }
    }

    #AIWRITER_PROMPT_INPUT {
        grid-area: 7 / 3 / 8 / 8;
        border: var(--size_border) var(--style_border) transparent;
        background-color: var(--color_background_soft);
        color: var(--color_foreground);
        &:hover {
            border-color: var(--color_border_light);
        }
        &:focus {
            outline: none;
            border-color: var(--color_foreground_soft);
        }
    }
    #AIWRITER_TOOLBAR {
        grid-area: 1 / 8 / 8 / 9;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        overflow-y: hidden;
        background-color: var(--color_background);

        .prompt_header {
            padding: var(--size_padding);
            border: var(--size_border) var(--style_border) var(--color_border);
            color: var(--color_foreground);
            background-color: var(--color_border);
            display: flex;
            flex-direction: row;
            align-items: center;

            .bx {
                margin-right: var(--size_margin);
            }
        }

        .prompt_settings {
            display: flex;
            flex-direction: row;
            input {
                background-color: var(--color_background);
                color: var(--color_foreground);
                border-width: var(--size_border);
                border-color: var(--color_border);
                min-width: 50px;

                /* Chrome, Safari, Edge, Opera */
                &::-webkit-outer-spin-button,
                &::-webkit-inner-spin-button {
                    -webkit-appearance: none;
                    margin: 0;
                }

                /* Firefox */
                &[type="number"] {
                    -moz-appearance: textfield;
                }

                &:hover {
                    border-color: var(--color_border_light);
                }
                &:focus {
                    outline: none;
                    border-color: var(--color_foreground);
                }
            }
            select {
                background-color: var(--color_background);
                color: var(--color_foreground);
                border-width: var(--size_border);
                border-color: var(--color_border);
                &:hover {
                    border-color: var(--color_border_light);
                }
                &:focus {
                    outline: none;
                    border-color: var(--color_foreground);
                }
            }
            button {
                transition: var(--transition_background_color);
                background-color: var(--color_background_soft);
                border-color: var(--color_border);
                color: var(--color_foreground);
                width: 100%;

                &:hover {
                    border-color: var(--color_border_light);
                }

                &:active {
                    transition: background-color 0ms;
                    background-color: var(--color_foreground_soft);
                    color: var(--color_background_hard);
                    border: var(--size_border) var(--style_border)
                        var(--color_foreground);
                }
            }
        }

        .prompt {
            resize: none;
            background-color: var(--color_background);
            border: var(--size_border) var(--style_border) var(--color_border);
            color: var(--color_foreground_hard);
            font-family: var(--sans);
            padding: var(--size_padding);
            margin: 0;
            box-shadow: var(--shadow);
            width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
            margin-bottom: var(--size_margin);
            font-size: small;
            min-height: max-content;
            &:hover {
                border-color: var(--color_border_light);
            }
            &:focus {
                outline: none;
                border-color: var(--color_foreground_soft);
            }
        }

        .readonly_prompt {
            display: flex;
            flex-direction: row;
            background-color: var(--color_background);
            border: var(--size_border) var(--style_border) var(--color_border);
            border-top: 0;
            color: var(--color_foreground_hard);
            font-family: var(--sans);
            padding: var(--size_padding);
            margin-bottom: var(--size_margin);
            font-size: small;
            border-bottom-left-radius: var(--size_border_radius);
            border-bottom-right-radius: var(--size_border_radius);
        }

        .tags_list {
            display: flex;
            flex-direction: column;

            .tag_tuple {
                display: flex;
                flex-direction: row;
                background-color: var(--color_background);
                border: var(--size_border) var(--style_border)
                    var(--color_border);
                color: var(--color_foreground_hard);
                font-family: var(--sans);
                padding: var(--size_padding);
                margin-bottom: var(--size_margin);
                &:last-of-type {
                    border-bottom-left-radius: var(--size_border_radius);
                    border-bottom-right-radius: var(--size_border_radius);
                }
            }
        }

        .user_action {
            cursor: pointer;
            transition: var(--transition_background_color);
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            border: var(--size_border) transparent var(--style_border);
            height: var(--size_toolbar_width);
            box-sizing: border-box;
            color: var(--color_foreground);
            background-color: var(--color_background_soft);
            width: 100%;
            box-shadow: var(--shadow);

            &:not(:first-of-type) {
                margin-top: var(--size_margin);
            }

            &:hover {
                border-color: var(--color_border_light);
            }
            &.active {
                background-color: var(--color_background_soft);
            }

            &:focus {
                outline: none;
                border-color: var(--color_border_light);
            }
            &:active {
                transition: background-color 0ms;
                background-color: var(--color_foreground_soft);
                color: var(--color_background_hard);
                border: var(--size_border) var(--style_border)
                    var(--color_foreground);
            }
        }

        #A_T_TOP {
            display: flex;
            flex-direction: column;
            overflow-y: scroll;
            flex-grow: 1;
        }
    }
    #CHARACTER_SHEET {
        .action_options {
            width: 100%;
            padding: var(--size_padding);
            border: var(--size_border) var(--color_border) var(--style_border);
            color: var(--color_foreground);
            background-color: var(--color_background_soft);
            box-sizing: border-box;
            height: var(--size_toolbar_width);
            box-shadow: var(--shadow);

            &:last-of-type {
                border-top-right-radius: var(--size_border_radius_large);
                border-bottom-right-radius: var(--size_border_radius_large);
                margin-left: var(--size_margin);
            }
        }

        .action_selection {
            display: flex;
            flex-direction: row;
            margin-top: var(--size_margin);
        }

        .skill {
            display: flex;
            flex-direction: row;
            align-items: center;
            padding-left: var(--size_padding);
            padding-right: var(--size_padding);
            justify-content: space-between;
            margin-top: var(--size_margin);
            background-color: var(--color_background);
            box-sizing: border-box;
            color: var(--color_foreground);

            border: var(--size_border) transparent var(--style_border);
            border-left-color: var(--color_border);

            &:last-of-type {
                border-bottom-left-radius: var(--size_border_radius_large);
                border-bottom-color: var(--color_border);
            }
        }

        .rules_buttons {
            display: flex;
            flex-direction: row;
            margin-top: var(--size_margin);
            button {
                width: 100%;
                transition: var(--transition_background_color);
                background-color: var(--color_background);
                border-color: var(--color_border);
                color: var(--color_foreground);
                &:hover {
                    border-color: var(--color_border_light);
                }
                &:active {
                    transition: background-color 0ms;
                    background-color: var(--color_foreground_soft);
                    color: var(--color_background_hard);
                    border: var(--size_border) var(--style_border)
                        var(--color_foreground);
                }
                &:first-of-type {
                    border-top-left-radius: var(--size_border_radius_large);
                }
                &:not(:last-of-type) {
                    margin-right: var(--size_margin);
                }
            }
        }

        .rules_list {
            display: flex;
            flex-direction: column;
            .rule {
                background-color: var(--color_background);
                margin-top: var(--size_margin);
                padding-left: var(--size_padding);
                padding-right: var(--size_padding);
                color: var(--color_foreground);
                border: var(--size_border) transparent var(--style_border);
                border-left-color: var(--color_border);

                &:last-of-type {
                    border-bottom-left-radius: var(--size_border_radius_large);
                    border-bottom-color: var(--color_border);
                }
            }
        }

        .character_name {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            color: var(--color_foreground);
            border: var(--size_border) var(--color_border) var(--style_border);
            margin-bottom: var(--size_margin);
            padding-left: var(--size_padding);
            padding-right: var(--size_padding);
            background-color: var(--color_background);
            overflow-x: hidden;
            font-family: var(--sans);

            .filename {
            }

            .tags {
                color: var(--color_border_light);
                overflow-x: scroll;
            }
        }

        .talents_grid {
            display: grid;
            grid-gap: var(--size_margin);
            grid-template-rows: repeat(2, 1fr);
            grid-template-columns: repeat(3, 1fr);

            width: 100%;

            color: var(--color_background);

            .grid_item {
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                padding: var(--size_margin);
                height: var(--size_toolbar_width);
                box-sizing: border-box;
                border: var(--size_border) var(--style_border) transparent;
                background-color: var(--color_background);
                .icon {
                    display: flex;
                    flex-direction: column;
                    justify-content: start;
                }
                .mod {
                    display: flex;
                    flex-direction: column;
                    justify-content: end;
                    font-weight: bold;
                    font-family: var(--mono);
                }
            }

            .const {
                grid-area: 1 / 1 / 2 / 2;
                border-color: var(--red);
                color: var(--red);
            }
            .str {
                grid-area: 1 / 2 / 2 / 3;
                border-color: var(--orange);
                color: var(--orange);
            }
            .dex {
                grid-area: 1 / 3 / 2 / 4;
                border-color: var(--yellow);
                color: var(--yellow);
            }
            .kno {
                grid-area: 2 / 1 / 3 / 2;
                border-color: var(--green);
                color: var(--green);
            }
            .rea {
                grid-area: 2 / 2 / 3 / 3;
                border-color: var(--blue);
                color: var(--blue);
            }
            .confi {
                grid-area: 2 / 3 / 3 / 4;
                border-color: var(--purple);
                color: var(--purple);
            }
        }

        .crit {
            margin-bottom: var(--size_margin);
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            padding-left: var(--size_padding);
            color: var(--color_foreground);
            border: var(--size_border) transparent var(--style_border);
            background-color: var(--color_background);
            border-top-left-radius: var(--size_border_radius_large);
            border-bottom-left-radius: var(--size_border_radius_large);
        }
    }
    #DONATE_MESSAGE {
        grid-area: 1 / 3 / 8 / 9;
        border: var(--size_border) transparent var(--color_border);
        background-color: var(--color_background_soft);
    }
}

.button_icon {
    transition: var(--transition_background_color);
    box-sizing: border-box;
    width: var(--size_toolbar_width);
    height: var(--size_toolbar_width);
    background-color: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-color: var(--color_border);
    color: var(--color_foreground);
    border-color: transparent;
    &:hover {
        border-color: var(--color_border_light);
    }
    &.active {
        background-color: var(--color_border);
    }
    &.red {
        background-color: var(--red-dim);
    }
    &.orange {
        background-color: var(--orange-dim);
    }
    &:focus {
        outline: none;
        border-color: var(--color_border_light);
    }
    &:active {
        transition: background-color 0ms;
        background-color: var(--color_foreground_soft);
        color: var(--color_background_hard);
        border: var(--size_border) var(--style_border) var(--color_foreground);
    }
}

.button_file {
    transition: var(--transition_background_color);
    box-sizing: border-box;
    width: 100%;
    height: var(--size_toolbar_width);
    background-color: var(--color_background);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-color: transparent;
    color: var(--color_foreground);
    font-family: var(--sans);
    &:hover {
        border-color: var(--color_border_light);
    }
    &.active {
        background-color: var(--color_background_soft);
    }
    &.context_menu {
        background-color: var(--color_background_hard);
    }

    &:focus {
        outline: none;
        border-color: var(--color_border_light);
    }
    &:active {
        transition: background-color 0ms;
        background-color: var(--color_foreground_soft);
        color: var(--color_background_hard);
        border: var(--size_border) var(--style_border) var(--color_foreground);
    }
    .filename {
        display: flex;
        flex-grow: 1;
        overflow: hidden;
    }
    .tags {
        display: flex;
        color: var(--color_border_light);
        max-width: 50%;
    }
    &.nameless {
        color: var(--color_border_light);
    }
}

.button_file_contextmenu {
    height: var(--size_toolbar_width);
    color: var(--color_foreground);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1px 0px 1px 4px;
    box-sizing: border-box;
    border-left: var(--size_border) solid transparent;
    background-color: var(--color_background_hard);

    .filename {
        display: flex;
        flex-grow: 1;
        font-size: small;
        user-select: none;
        overflow: hidden;
        white-space: nowrap;

        &:hover {
            color: var(--color_foreground_hard);
        }
        &:focus {
            outline: none;
            color: var(--color_foreground_hard);
        }
    }

    .actions {
        display: flex;
        flex-direction: row;
    }
}

.filelist_header {
    display: flex;
    flex-direction: row;
    font-family: var(--sans);
    color: var(--color_border_light);
    font-size: small;
    justify-content: start;
    align-content: center;
    border-bottom: var(--size_border) var(--style_border) transparent;

    padding-left: var(--size_padding);
    padding-right: var(--size_padding);

    .bx {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: small;
    }

    &:hover {
        background-color: var(--color_background);
        border-left-color: var(--color_border_light);
        border-right-color: var(--color_background);
        border-bottom-color: var(--color_border);
    }
}

.filelist_footer {
    display: flex;
    flex-direction: row;
    font-family: var(--sans);
    color: var(--color_border_light);
    font-size: small;
    justify-content: start;
    border-top: var(--size_border) var(--style_border) transparent;

    padding-left: var(--size_padding);
    padding-right: var(--size_padding);

    .bx {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: small;
    }

    &:hover {
        background-color: var(--color_background);
        border-left-color: var(--color_background);
        border-right-color: var(--color_border_light);
        border-top-color: var(--color_border);
    }
}

.rounded_right {
    border-top-right-radius: var(--size_border_radius_large);
    border-bottom-right-radius: var(--size_border_radius_large);
}

.rounded_left {
    border-top-left-radius: var(--size_border_radius_large);
    border-bottom-left-radius: var(--size_border_radius_large);
}

.rounded_top {
    border-top-left-radius: var(--size_border_radius_large);
    border-top-right-radius: var(--size_border_radius_large);
}

.rounded_bottom {
    border-bottom-left-radius: var(--size_border_radius_large);
    border-bottom-right-radius: var(--size_border_radius_large);
}

.bx {
    font-size: var(--size_icon);
}

.margin_b {
    margin-bottom: var(--size_margin);
}

.border_radius {
    border-radius: var(--size_toolbar_width);
}
